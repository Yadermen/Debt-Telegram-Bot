from ..database.crud import get_user_data

LANGS = {
    'ru': {
        'welcome': '–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ QarzNazoratBot!\n–í—ã–±–µ—Ä–∏—Ç–µ –¥–µ–π—Å—Ç–≤–∏–µ:',
        'choose_action': '–í—ã–±–µ—Ä–∏—Ç–µ –¥–µ–π—Å—Ç–≤–∏–µ:',
        'add_debt': '‚ûï –î–æ–±–∞–≤–∏—Ç—å –¥–æ–ª–≥',
        'my_debts': 'üìÑ –ú–æ–∏ –¥–æ–ª–≥–∏',
        'clear_all': 'üïî –û—á–∏—Å—Ç–∏—Ç—å –≤—Å–µ',
        'reminders_menu': '‚è∞ –ú–æ–∏ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è',
        'change_lang': 'üåê –°–º–µ–Ω–∏—Ç—å —è–∑—ã–∫',
        'choose_lang': '–í—ã–±–µ—Ä–∏—Ç–µ —è–∑—ã–∫:',
        'lang_ru': '–†—É—Å—Å–∫–∏–π',
        'lang_uz': '–£–∑–±–µ–∫—Å–∫–∏–π',
        'no_debts': '–£ –≤–∞—Å –Ω–µ—Ç –¥–æ–ª–≥–æ–≤.',
        'your_debts': '–í–∞—à–∏ –¥–æ–ª–≥–∏:',
        'debt_saved': '‚úÖ –î–æ–ª–≥ –∑–∞–ø–∏—Å–∞–Ω!\n\n–í—ã–±–µ—Ä–∏—Ç–µ –¥–µ–π—Å—Ç–≤–∏–µ:',
        'debt_closed': '‚úÖ –î–æ–ª–≥ –æ—Ç–º–µ—á–µ–Ω –∫–∞–∫ –≤–æ–∑–≤—Ä–∞—â—ë–Ω!\n\n–í—ã–±–µ—Ä–∏—Ç–µ –¥–µ–π—Å—Ç–≤–∏–µ:',
        'debt_deleted': '‚ùå –î–æ–ª–≥ —É–¥–∞–ª—ë–Ω!\n\n–í—ã–±–µ—Ä–∏—Ç–µ –¥–µ–π—Å—Ç–≤–∏–µ:',
        'debt_not_found': '–î–æ–ª–≥ –Ω–µ –Ω–∞–π–¥–µ–Ω',
        'confirm_close': '–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ –æ—Ç–º–µ—Ç–∏—Ç—å –¥–æ–ª–≥ –∫–∞–∫ –≤–æ–∑–≤—Ä–∞—â—ë–Ω?',
        'confirm_del': '–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å –¥–æ–ª–≥?',
        'cancelled': '–î–µ–π—Å—Ç–≤–∏–µ –æ—Ç–º–µ–Ω–µ–Ω–æ.',
        'back': '‚¨ÖÔ∏è –ù–∞–∑–∞–¥',
        'to_menu': '–í –º–µ–Ω—é',
        'to_list': '‚¨ÖÔ∏è –ö —Å–ø–∏—Å–∫—É',
        'edit': '–ò–∑–º–µ–Ω–∏—Ç—å',
        'delete': '–£–¥–∞–ª–∏—Ç—å',
        'close': '–ü–æ–≥–∞—Å–∏—Ç—å',
        'extend': '–ü—Ä–æ–¥–ª–∏—Ç—å',
        'person': 'üìõ –ò–º—è —á–µ–ª–æ–≤–µ–∫–∞:',
        'currency': '–í—ã–±–µ—Ä–∏—Ç–µ –≤–∞–ª—é—Ç—É:',
        'amount': 'üí∞ –°—É–º–º–∞:',
        'amount_wrong': '–í–≤–µ–¥–∏—Ç–µ —Å—É–º–º—É —á–∏—Å–ª–æ–º!',
        'due': 'üìÖ –°—Ä–æ–∫ –≤–æ–∑–≤—Ä–∞—Ç–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä):\n{suggest_date}',
        'due_wrong': '–§–æ—Ä–º–∞—Ç –¥–∞—Ç—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä):\n{suggest_date}',
        'direction': 'üîÅ –¢—ã –¥–∞–ª –∏–ª–∏ –≤–∑—è–ª?',
        'dir_gave': '–¢—ã –¥–∞–ª',
        'dir_took': '–¢—ã –≤–∑—è–ª',
        'comment': 'üìù –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π (–º–æ–∂–Ω–æ –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å):',
        'skip_comment': '–ü—Ä–æ–ø—É—Å—Ç–∏—Ç—å',
        'date_format': '–§–æ—Ä–º–∞—Ç –¥–∞—Ç—ã: {suggest_date}',
        'date_changed': '–î–∞—Ç–∞ –∏–∑–º–µ–Ω–µ–Ω–∞!',
        'changed': '–ò–∑–º–µ–Ω–µ–Ω–æ!',
        'all_deleted': 'üïî –í—Å–µ –¥–æ–ª–≥–∏ —É–¥–∞–ª–µ–Ω—ã!\n\n–í—ã–±–µ—Ä–∏—Ç–µ –¥–µ–π—Å—Ç–≤–∏–µ:',
        'clear_all_confirm': '–í—ã —Ç–æ—á–Ω–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å –≤—Å–µ –¥–æ–ª–≥–∏?',
        'yes': '–î–∞',
        'no': '–ù–µ—Ç',
        'notify_time': '–í–≤–µ–¥–∏—Ç–µ –Ω–æ–≤–æ–µ –≤—Ä–µ–º—è –¥–ª—è –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π (–Ω–∞–ø—Ä–∏–º–µ—Ä: 09:00):',
        'notify_wrong': '–ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –≤—Ä–µ–º–µ–Ω–∏. –í–≤–µ–¥–∏—Ç–µ –≤ —Ñ–æ—Ä–º–∞—Ç–µ –ß–ß:–ú–ú, –Ω–∞–ø—Ä–∏–º–µ—Ä 09:00',
        'notify_set': '–í—Ä–µ–º—è –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ!\n',
        'edit_what': '–ß—Ç–æ –∏–∑–º–µ–Ω–∏—Ç—å?',
        'debt_card': '{person} {amount} {currency}\n–°—Ä–æ–∫: {due}\n–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π: {comment}\n–í—Ä–µ–º—è –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è: {notify_time}',
        'editfield_person': '–í–≤–µ–¥–∏—Ç–µ –Ω–æ–≤–æ–µ –∏–º—è:',
        'editfield_amount': '–í–≤–µ–¥–∏—Ç–µ –Ω–æ–≤—É—é —Å—É–º–º—É (—Ç–æ–ª—å–∫–æ —á–∏—Å–ª–æ):',
        'editfield_currency': '–í–≤–µ–¥–∏—Ç–µ –Ω–æ–≤—É—é –≤–∞–ª—é—Ç—É (USD, UZS, EUR):',
        'editfield_due': '–í–≤–µ–¥–∏—Ç–µ –Ω–æ–≤—É—é –¥–∞—Ç—É (–Ω–∞–ø—Ä–∏–º–µ—Ä: {suggest_date}):',
        'editfield_comment': '–í–≤–µ–¥–∏—Ç–µ –Ω–æ–≤—ã–π –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π:',
        'currency_changed': '–í–∞–ª—é—Ç–∞ –∏–∑–º–µ–Ω–µ–Ω–∞!',
        'remind_close': '‚úÖ –ü–æ–≥–∞—Å–∏—Ç—å',
        'remind_extend': 'üîÅ –ü—Ä–æ–¥–ª–∏—Ç—å',
        'remind_delete': '‚ùå –£–¥–∞–ª–∏—Ç—å',
        'action_close': '‚úÖ –ü–æ–≥–∞—Å–∏—Ç—å',
        'action_delete': '‚ùå –£–¥–∞–ª–∏—Ç—å',
        'action_extend': 'üîÅ –ü—Ä–æ–¥–ª–∏—Ç—å',
        'direction_wrong': '–í–≤–µ–¥–∏—Ç–µ "gave" –∏–ª–∏ "took"!',
        'reminder_time': '–í–∞—à–µ –≤—Ä–µ–º—è –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è: {time}',
        'reminder_change': '–ò–∑–º–µ–Ω–∏—Ç—å –≤—Ä–µ–º—è',
        'forward': '–í–ø–µ—Ä—ë–¥ ‚û°Ô∏è',
        'backward': '‚¨ÖÔ∏è –ù–∞–∑–∞–¥',
        'db_error': '–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ–±—Ä–∞—â–µ–Ω–∏–∏ –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–∑–∂–µ.',
        'not_found_or_no_access': '–î–æ–ª–≥ –Ω–µ –Ω–∞–π–¥–µ–Ω –∏–ª–∏ –Ω–µ—Ç –¥–æ—Å—Ç—É–ø–∞.',
        'delete_error': '–û—à–∏–±–∫–∞ –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –¥–æ–ª–≥–∞.',
        'update_error': '–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ –¥–æ–ª–≥–∞.',
        'save_notify_error': '–û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ –≤—Ä–µ–º–µ–Ω–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π.',
        'bad_request': '–û—à–∏–±–∫–∞: –Ω–µ–≤–µ—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –∑–∞–ø—Ä–æ—Å–∞.',
        'editfield_due_btn': '–ò–∑–º–µ–Ω–∏—Ç—å –¥–∞—Ç—É',
        'editfield_person_btn': '–ò–∑–º–µ–Ω–∏—Ç—å –∏–º—è',
        'editfield_amount_btn': '–ò–∑–º–µ–Ω–∏—Ç—å —Å—É–º–º—É',
        'editfield_currency_btn': '–ò–∑–º–µ–Ω–∏—Ç—å –≤–∞–ª—é—Ç—É',
        'editfield_comment_btn': '–ò–∑–º–µ–Ω–∏—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π',
        'how_to_use_btn': '‚ÑπÔ∏è –ö–∞–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è',
        'how_to_use_msg': '–ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É –Ω–∏–∂–µ, —á—Ç–æ–±—ã –æ—Ç–∫—Ä—ã—Ç—å –ø–æ–¥—Ä–æ–±–Ω—É—é –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—é –ø–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é –±–æ—Ç–∞.',
        'open_instruction': '–û—Ç–∫—Ä—ã—Ç—å –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—é',
        'continue_instruction': '–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—é',
        'instruction_back': '‚¨ÖÔ∏è –ù–∞–∑–∞–¥',
        'debt_card_owed': 'üë§ –î–æ–ª–∂–Ω–∏–∫: {person}\nüí∞ –°—É–º–º–∞ –¥–æ–ª–≥–∞: {amount} {currency}\nüìÖ –°—Ä–æ–∫ –æ–ø–ª–∞—Ç—ã: {due}\nüìù –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π: {comment}\n‚è∞ –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ: {notify_time}',
        'debt_card_owe': 'üë§ –ö–æ–º—É –¥–æ–ª–∂–µ–Ω: {person}\nüí∞ –°—É–º–º–∞: {amount} {currency}\nüìÖ –°—Ä–æ–∫ –æ–ø–ª–∞—Ç—ã: {due}\nüìù –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π: {comment}\n‚è∞ –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ: {notify_time}',
        'daily_reminder_header': '‚è∞ –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ –æ –¥–æ–ª–≥–∞—Ö:',
        'overdue': '‚ö†Ô∏è –ü—Ä–æ—Å—Ä–æ—á–µ–Ω –Ω–∞ {days} –¥–Ω.',
        'due_today': 'üî• –°—Ä–æ–∫ –∏—Å—Ç–µ–∫–∞–µ—Ç —Å–µ–≥–æ–¥–Ω—è!',
        'due_in_days': '‚è≥ –û—Å—Ç–∞–ª–æ—Å—å {days} –¥–Ω.',
        'debtor_name': '–î–æ–ª–∂–Ω–∏–∫ {person}',
        'creditor_name': '–ö—Ä–µ–¥–∏—Ç–æ—Ä {person}',
        'single_reminder': '‚è∞ –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ!\n\n{person} –¥–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å {amount} {currency}\n–°—Ä–æ–∫: {due}',
        'multiple_reminders': '‚è∞ –£ –≤–∞—Å {count} –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π –æ –¥–æ–ª–≥–∞—Ö:',
        'process_interrupted': '–í—ã —Ö–æ—Ç–∏—Ç–µ –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å –ø—Ä–æ—Ü–µ—Å—Å —Å–æ–∑–¥–∞–Ω–∏—è?',
        'continue_process': 'üìù –ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å',
        'cancel_and_menu': 'üîô –û—Ç–º–µ–Ω–∏—Ç—å –∏ –≤ –º–µ–Ω—é'
    },
    'uz': {
        'welcome': 'QarzNazoratBot-ga xush kelibsiz!\nAmalni tanlang:',
        'choose_action': 'Amalni tanlang:',
        'add_debt': '‚ûï Qarzni qo‚Äòshish',
        'my_debts': 'üìÑ Qarzlarim',
        'clear_all': 'üïî Hammasini o‚Äòchirish',
        'reminders_menu': '‚è∞ Eslatmalarim',
        'change_lang': 'üåê Tilni o‚Äòzgartirish',
        'choose_lang': 'Tilni tanlang:',
        'lang_ru': 'Rus tili',
        'lang_uz': 'O‚Äòzbek tili',
        'no_debts': 'Sizda qarzlar yo‚Äòq.',
        'your_debts': 'Qarzlaringiz:',
        'debt_saved': '‚úÖ Qarz saqlandi!\n\nAmalni tanlang:',
        'debt_closed': '‚úÖ Qarz yopildi!\n\nAmalni tanlang:',
        'debt_deleted': '‚ùå Qarz o‚Äòchirildi!\n\nAmalni tanlang:',
        'debt_not_found': 'Qarz topilmadi',
        'confirm_close': 'Qarz yopildi deb belgilansinmi?',
        'confirm_del': 'Qarz o‚Äòchirilsinmi?',
        'cancelled': 'Amal bekor qilindi.',
        'back': '‚¨ÖÔ∏è Orqaga',
        'to_menu': 'Menyuga',
        'to_list': '‚¨ÖÔ∏è Ro‚Äòyxatga',
        'edit': 'O‚Äòzgartirish',
        'delete': 'O‚Äòchirish',
        'close': 'Yopish',
        'extend': 'Uzaytirish',
        'person': 'üìõ Kimdan qarz?:',
        'currency': 'Valyutani tanlang:',
        'amount': 'üí∞ Miqdor:',
        'amount_wrong': 'Miqdor faqat raqam bo‚Äòlishi kerak!',
        'due': 'üìÖ Qaytarish muddati (masalan):\n{suggest_date}',
        'due_wrong': 'Sana formati (masalan):\n{suggest_date}',
        'direction': 'üîÅ Siz berdingizmi yoki oldingizmi?',
        'dir_gave': 'Siz berdingiz',
        'dir_took': 'Siz oldingiz',
        'comment': 'üìù Izoh (ixtiyoriy):',
        'skip_comment': 'O‚Äòtkazib yuborish',
        'date_format': 'Sana formati: {suggest_date}',
        'date_changed': 'Sana o‚Äòzgartirildi!',
        'changed': 'O‚Äòzgartirildi!',
        'all_deleted': 'üïî Barcha qarzlar o‚Äòchirildi!\n\nAmalni tanlang:',
        'clear_all_confirm': 'Barcha qarzlarni o‚Äòchirilsinmi?',
        'yes': 'Ha',
        'no': 'Yo‚Äòq',
        'notify_time': 'Eslatma vaqti (masalan: 09:00):',
        'notify_wrong': 'Vaqt formati noto‚Äòg‚Äòri. Masalan: 09:00',
        'notify_set': 'Eslatma vaqti o‚Äòrnatildi!\n',
        'edit_what': 'Nimani o‚Äòzgartirasiz?',
        'debt_card': '{person} {amount} {currency}\nSana: {due}\nIzoh: {comment}\nEslatma vaqti: {notify_time}',
        'editfield_person': 'Yangi ismni kiriting:',
        'editfield_amount': 'Yangi miqdorini kiriting:',
        'editfield_currency': 'Yangi valyutani kiriting (USD, UZS, EUR):',
        'editfield_due': 'Yangi muddatni kiriting (masalan: {suggest_date}):',
        'editfield_comment': 'Yangi izohni kiriting:',
        'currency_changed': 'Valyuta o‚Äòzgartirildi!',
        'remind_close': '‚úÖ Yopish',
        'remind_extend': 'üîÅ Uzaytirish',
        'remind_delete': '‚ùå O‚Äòchirish',
        'action_close': '‚úÖ Yopish',
        'action_delete': '‚ùå O‚Äòchirish',
        'action_extend': 'üîÅ Uzaytirish',
        'direction_wrong': 'Vedite "gave" ili "took"!',
        'reminder_time': 'Eslatma vaqti: {time}',
        'reminder_change': 'Vaqtni o‚Äòzgartirish',
        'forward': 'Oldinga ‚û°Ô∏è',
        'backward': '‚¨ÖÔ∏è Orqaga',
        'db_error': 'Ma ºlumotlar bazasiga murojaat qilishda xatolik. Keyinroq urinib ko‚Äòring.',
        'not_found_or_no_access': 'Qarz topilmadi yoki ruxsat yo‚Äòq.',
        'delete_error': 'Qarz o‚Äòchirishda xatolik.',
        'update_error': 'Qarzni yangilashda xatolik.',
        'save_notify_error': 'Eslatma vaqtini saqlashda xatolik.',
        'bad_request': 'Xatolik: noto‚Äòg‚Äòri so‚Äòrov formati.',
        'editfield_due_btn': 'Sanani o‚Äòzgartirish',
        'editfield_person_btn': 'Ismni o‚Äòzgartirish',
        'editfield_amount_btn': 'Miqdorni o‚Äòzgartirish',
        'editfield_currency_btn': 'Valyutani o‚Äòzgartirish',
        'editfield_comment_btn': 'Izohni o‚Äòzgartirish',
        'how_to_use_btn': '‚ÑπÔ∏è Qanday foydalanish',
        'how_to_use_msg': 'Botdan foydalanish bo‚Äòyicha batafsil yo‚Äòriqnomani ochish uchun pastdagi tugmani bosing.',
        'open_instruction': 'Yo‚Äòriqnomani ochish',
        'continue_instruction': 'Yo‚Äòriqnomani davom ettirish',
        'instruction_back': '‚¨ÖÔ∏è Orqaga',
        'debt_card_owed': 'üë§ Qarzdor: {person}\nüí∞ Qarzi: {amount} {currency}\nüìÖ To\'lov muddati: {due}\nüìù Izoh: {comment}\n‚è∞ Eslatma vaqti: {notify_time}',
        'debt_card_owe': 'üë§ Sizning qarzingiz: {person}\nüí∞ Siz to\'lashingiz kerak: {amount} {currency}\nüìÖ To\'lov muddati: {due}\nüìù Izoh: {comment}\n‚è∞ Eslatma vaqti: {notify_time}',
        'process_interrupted': 'Yaratish jarayonini davom ettirishni xohlaysizmi?',
        'continue_process': 'üìù Davom etish',
        'cancel_and_menu': 'üîô Bekor qilish va menyuga',
        'daily_reminder_header': '‚è∞ Qarz eslatmasi:',
        'overdue': '‚ö†Ô∏è {days} kun kechiktirilgan',
        'due_today': 'üî• Muddat bugun tugaydi!',
        'due_in_days': '‚è≥ {days} kun qoldi',
        'debtor_name': 'Qarzdor {person}',
        'creditor_name': 'Kreditor {person}',
        'single_reminder': '‚è∞ Eslatma!\n\n{person} {amount} {currency} qaytarishi kerak\nMuddati: {due}',
        'multiple_reminders': '‚è∞ Sizda {count} ta qarz eslatmalari bor:'

    }
}

async def tr(user_id: int, key: str, **kwargs) -> str:
    """–ü–æ–ª—É—á–∏—Ç—å –ø–µ—Ä–µ–≤–µ–¥–µ–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è"""
    try:
        user_data = await get_user_data(user_id)
        lang = user_data.get('lang', 'ru')
        text = LANGS[lang].get(key, key)
        return text.format(**kwargs) if kwargs else text
    except Exception:
        # –í —Å–ª—É—á–∞–µ –æ—à–∏–±–∫–∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º —Ä—É—Å—Å–∫–∏–π —Ç–µ–∫—Å—Ç
        text = LANGS['ru'].get(key, key)
        return text.format(**kwargs) if kwargs else text